<div class="p-strip is-shallow u-extra-space tab-content u-hide" id="available-roles">
  <div class="row u-vertically-center">
    <div class="col-3">
      <small class="p-form-help-text u-sv2">Select the role(s) you are interested in and apply once to them all.</small>
    </div>
    <div class="col-6">
      <form action="" method="get" class="p-form p-form--inline">
        <div class="p-form__group">
          <label for="filter" aria-label="Filter by job type" class="p-form__label">Filter by</label>
          <select class="js-submit-on-change p-form__control" id="filter" name="content"
            aria-label="Filter by job type">
            <option {% if not category %}selected="selected" {% endif %} value="{{request.path}}#available-roles">All
            </option>
            <option {% if category and category == 'home-based' %}selected="selected" {% endif %}
              value="?category=home-based#available-roles">Home based</option>
            <option {% if category and category == 'office-based' %}selected="selected" {% endif %}
              value="?category=office-based#available-roles">Office based</option>
            <option {% if category and category == 'management' %}selected="selected" {% endif %}
              value="?category=management#available-roles">Management</option>
            <option {% if category and category == 'full-time' %}selected="selected" {% endif %}
              value="?category=full-time#available-roles">Full-time</option>
            <option {% if category and category == 'part-time' %}selected="selected" {% endif %}
              value="?category=part-time#available-roles">Part-time</option>
          </select>
        </div>
        <div class="p-form__group">
          <label for="full-name-inline" aria-label="Sort resources" class="p-form__label">Sort by</label>
          <select class="js-sort p-form__control" name="filter" aria-label="Sort resources">
            <option>Date</option>
            <option>Location</option>
            {% if request.path == "/careers/all"%}
            <option>Job sector</option>
            {% endif %}
          </select>
        </div>
      </form>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <hr />
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <form action="">
        <ul class="p-list--divided js-sort-list">
          {% for job in vacancies %}
          <li class="p-list__item" data-date="{{ job.date }}" data-location="{{ job.location }}"
            data-sector="{{ job.department }}">
            <p class="u-no-margin--bottom u-sv1"><small style="padding-left: 2rem;">{{ job.location }}</small></p>
            <p class="u-hide">{{ job.date }}</p>
            <input type="checkbox" name="roles" id="{{ job.id }}" />
            <label class="p-checkbox-label--h2 u-no-padding--top" for="{{ job.id }}">
              <h2 class="u-no-margin--bottom u-sv1"><a class="p-link--soft"
                  href="{{request.path}}/{{ job.id }}">{{ job.title }}&nbsp;&rsaquo;</a></h2>
              <p class="u-sv3">
                {{ "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lorem felis, elementum sit amet maximus quis, consequat elementum tortor. Sed molestie imperdiet pretium."|truncate(130)}}
              </p>
            </label>
          </li>
          {% endfor %}
        </ul>
        <hr />
        <button type="submit">Apply now</button>
      </form>
    </div>
  </div>
</div>

<script async defer src="/static/js/careers-sorting.js"></script>

<script>
  var filterSelect = document.querySelector('.js-submit-on-change');
  filterSelect.addEventListener("change", function (e) {
    var form = this.closest("form");
    if (form) {
      location.href = document.getElementById("filter").value;
    }
  });
</script>