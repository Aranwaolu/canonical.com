{% extends 'base_index.html' %} {% block content %}

<section class="p-strip--image is-dark is-deep u-no-padding--top u-no-padding--bottom u-extra-space">
  <div class="p-strip--suru-background">
    <div class="row">
      <div class="col-6">
        <h1>{% block title %}{% endblock %}</h1>
      </div>
    </div>
  </div>
</section>

<section class="p-strip u-extra-space">
  <div class="row">
    {% include 'partial/_careers-navigation.html' %}
    <div class="col-8 col-start-large-5">
      {% if message %}
      <div class="row">
        <div class="col-8">
          <div class="p-notification--{{message.type}}">
            <p class="p-notification__response">
              <span class="p-notification__status">{{message.title}}:&nbsp;</span>{{message.text}}
            </p>
          </div>
        </div>
      </div>
      {% endif %}

      <nav class="p-tabs">
        <ul class="p-tabs__list" role="tablist">
          <li class="p-tabs__item" role="presentation">
            <a href="#overview" class="p-tabs__link" tabindex="0" role="tab" aria-controls="overview" aria-selected="true">Overview</a>
          </li>
          <li class="p-tabs__item" role="presentation">
            <a href="#available-roles" class="p-tabs__link" tabindex="-1" role="tab" aria-controls="available-roles">Available roles</a>
          </li>
          <li class="p-tabs__item" role="presentation">
            <a href="#send-cv" class="p-tabs__link" tabindex="-1" role="tab" aria-controls="send-cv">Send your
              CV</a>
          </li>
        </ul>
      </nav>

      <div class="p-strip p-tabs__content is-shallow u-extra-space" id="available-roles">
        {% include 'partial/_careers-available-roles.html' %}
      </div>

      <div class="p-strip p-tabs__content is-shallow u-extra-space" id="send-cv">
        {% include 'partial/_careers-send-cv.html' %}
      </div>

      <div class="p-strip p-tabs__content is-shallow u-extra-space" id="overview">
        {% block overview %}{% endblock %}
      </div>
    </div>
  </div>
  {% include 'partial/_careers-modal.html' %}
</section>

<script defer src="/static/js/careers-filter-and-sort.js"></script>
<script defer src="/static/js/apply-for-jobs.js"></script>
<script defer src="/static/js/file-validation.js"></script>
<script>
  // prevent the page jumping around when switching tabs,
  // whilst still using :target
  // https://gist.github.com/pimterry/260841c2104f27cadc954a29b9873b96#file-disable-link-jump-with-workaround-js

  var tabLinks = document.querySelectorAll("a[href^='#']");

  [].forEach.call(tabLinks, function (link) {
    link.addEventListener("click", function (event) {
      var urlHash = window.location.hash;

      event.preventDefault();
      history.pushState({}, "", link.href);
      
      // Update the URL again with the same hash, then go back
      history.pushState({}, "", link.href);
      history.back();
    });
  });
</script>
{% endblock %}
