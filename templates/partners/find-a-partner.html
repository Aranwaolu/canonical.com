{% extends 'base.html' %}

{% block content %}
  <section class="p-strip--image is-dark">
    <div class="p-strip--suru-top">
      <div class="row">
        <div class="col-8">
          <h1>Find a Partner</h1>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="col-4 u-hide--small u-align--center u-vertically-center">
          <img src="https://assets.ubuntu.com/v1/18dc67e0-lrg-magnifier-icon.svg" alt="">
        </div>
      </div>
    </div>
  </section>
  <section class="p-strip--light is-shallow u-hide">
    <div class="row">
      <div class="col-3">
        <form class="p-search-box">
          <input class="p-search-box__input p-find-a-partner__search-input" name="search" id="search" placeholder="Search" required="" type="search">
          <button type="reset" class="p-search-box__reset u-no-margin--right" alt="reset"><i class="p-icon--close"></i></button>
          <button type="submit" class="p-search-box__button" alt="search"><i class="p-icon--search"></i></button>
        </form>
      </div>
      <div class="col-3">
        <button type="button" class="p-button--accordion p-heading--four" id="tab1" role="tab" aria-controls="#tab-section" aria-expanded="false">Filters</button>  
      </div>
    </div>
    <div class="row p-accordion-panel" id="tab-section" role="tabpanel" aria-hidden="true" aria-labelledby="tab-section">
      <div class="col-4">
        <p class="p-heading--four">Technology</p>
        <hr/>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-cloud-server" id="technology-cloud-server">
          <label for="technology-cloud-server">Cloud/server</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-personal-computing-devices" id="technology-personal-computing-devices">
          <label for="technology-personal-computing-devices">Personal computing/devices</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-robotics" id="technology-robotics">
          <label for="technology-robotics">Robotics</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-edge-gateway" id="technology-edge-gateway">
          <label for="technology-edge-gateway">Edge Gateway</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-containers" id="technology-containers">
          <label for="technology-containers">Containers</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="technology-ai-ml" id="technology-ai-ml">
          <label for="technology-ai-ml">AI/ML</label>
        </p>
      </div>
      <div class="col-4">
        <p class="p-heading--four">Programme</p>
        <hr/>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-certified-public-cloud" id="programme-certified-public-cloud">
          <label for="programme-certified-public-cloud">Certified Public Cloud</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-retailer" id="programme-retailer">
          <label for="programme-retailer">Retailer</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-charm-partner-programme" id="programme-charm-partner-programme">
          <label for="programme-charm-partner-programme">Charm Partner Programme</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-other" id="programme-other">
          <label for="programme-other">Other</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-internet-of-things" id="programme-internet-of-things">
          <label for="programme-internet-of-things">Internet of Things</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-desktop" id="programme-desktop">
          <label for="programme-desktop">Desktop</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-channel" id="programme-channel">
          <label for="programme-channel">Channel</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-bootstack" id="programme-bootstack">
          <label for="programme-bootstack">BootStack</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="programme-technical-partner-programme" id="programme-technical-partner-programme">
          <label for="programme-technical-partner-programme">Technical Partner Programme</label>
        </p>
      </div>
      <div class="col-4">
        <p class="p-heading--four">Services offered</p>
        <hr/>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-software-content-publisher" id="service-offered-software-content-publisher">
          <label for="service-offered-software-content-publisher">Software/content publisher</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-infrastructure-provider" id="service-offered-infrastructure-provider">
          <label for="service-offered-infrastructure-provider">Infrastructure provider</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-system-integrator-consultant" id="service-offered-system-integrator-consultant">
          <label for="service-offered-system-integrator-consultant">System integrator/consultant</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-network-operator" id="service-offered-network-operator">
          <label for="service-offered-network-operator">Network operator</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-hardware-manufacturer" id="service-offered-hardware-manufacturer">
          <label for="service-offered-hardware-manufacturer">Hardware manufacturer</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-big-data" id="service-offered-big-data">
          <label for="service-offered-big-data">Big data</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-channel" id="service-offered-channel">
          <label for="service-offered-channel">Channel</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-hosting-provider" id="service-offered-hosting-provider">
          <label for="service-offered-hosting-provider">Hosting provider</label>
        </p>
        <p>
          <input type="checkbox" class="p-find-a-partner__filter" name="service-offered-hpc" id="service-offered-hpc">
          <label for="service-offered-hpc">HPC</label>
        </p>
      </div>
    </div>
  </section>
  <section class="p-strip is-shallow u-extra-space">
    <div id="results" class="p-find-a-partner">
      <div class="u-fixed-width p-notification p-find-a-partner__no-results u-hide">
        <p class="p-notification__response">
          Sorry, no partners matches found.<br />
          Perhaps <a href="/partners/find-a-partner">start your search again?</a>
        </p>
      </div>
      {% if partners %}
      <div class="row p-find-a-partner__partner-list">
        {% for partner in partners %}
        <div id="{{ partner['slug'] }}" class="col-4 col-small-4 col-medium-3 p-find-a-partner__partner" data-searchText="{{ partner['name'] }} {{ partner['short_description'] }} {% for tag in partner['tags'] %}{{ tag['fields']['tag'] }}{% endfor %}" data-filter="{% for technology in partner['technology'] %}technology-{{technology['name']|slug }} {% endfor %}{% for programme in partner['programme'] %}programme-{{ programme['name']|slug }} {% endfor %}{% for service_offered in partner['service_offered'] %}service-offered-{{ service_offered['name']|slug }} {% endfor %}">
          <div class="p-card--no-border">
            {% if partner['partner_website'] %}
            <a title="Vist the {{ partner['name'] }} website" href="{{ partner['partner_website'] }}">
            {% else %}
            <a href="/{{ partner['slug'] }}">
            {% endif %}
            {% if partner['logo'] %}
              <img class="p-card__thumbnail" src="{{ partner['logo'] }}" alt="image for {{ partner['name'] }}">
            {% endif %}
            </a>
            <p>
            {% if partner['partner_website'] %}
              <a title="Vist the {{ partner['name'] }} website" href="{{ partner['partner_website'] }}" class="p-link--external">{{ partner['name'] }}</a>
            {% else %}
              <a href="/{{ partner['slug'] }}">{{ partner['name'] }}</a>
            {% endif %}
            </p>
            <p class="p-card__content">{{ partner['short_description']|markup|safe }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </section>
  <script async defer src="/static/js/find-a-partner.js"></script>

  <style>
    .p-strip--suru-top {
      background-image:
      linear-gradient(to bottom right, rgba(210,180,202,0.05) 0%, rgba(210,180,202,0.05) 49.9%, rgba(210,180,202,0) 50%, rgba(210,180,202,0) 100%),
      linear-gradient(to top right, rgba(74,24,60,0) 0%, rgba(74,24,60,0) 49.9%, rgba(74,24,60,0.34) 50%, rgba(74,24,60,0.34) 100%),
      linear-gradient(to top left, #f7f7f7 0%, #f7f7f7 49%, transparent 50%),
      linear-gradient(230deg, #E95420 0%, #772953 33%, #2C001E 72%);
      background-position: left top, right top, right bottom;
      background-repeat: no-repeat;
      background-size: 70% 80%, 70% 100%, 110% 20%, 100% 100%;
      padding-bottom: 6rem;
      padding-top: 6rem;
    }

    @media (max-width: 620px) {
      .p-strip--suru-top {
        background-image:
          linear-gradient(to top right, rgba(74,24,60,0) 0%, rgba(74,24,60,0) 49.9%, rgba(74, 24, 60, 0.4) 50%, rgba(74, 24, 60, 0.4) 100%),
          linear-gradient(to top left, #f7f7f7 0%, #f7f7f7 49%, transparent 50%),
          linear-gradient(to bottom right, rgba(210,180,202,0.05) 0%, rgba(210,180,202,0.05) 49.9%, rgba(210,180,202,0) 50%, rgba(210,180,202,0) 100%),
          linear-gradient(120deg, #2C001E  4%,  #4C193E 100%);
        background-position: right top, bottom right, top left, top left, center right;
        background-repeat: no-repeat;
        background-size: 100% 100%, 105% 25%, 70% 80%, 100% 100%;
      }
    }
  </style>

  <script>
    function displayFilters () {
      const toggle = (element, show) => {
        element.setAttribute('aria-expanded', show);
        document
          .querySelector(element.getAttribute('aria-controls'))
          .setAttribute('aria-hidden', !show);
      }
      document
        .querySelector(".p-button--accordion")
        .addEventListener('click', e => {
          const target = e.target;
          const isTargetOpen = target.getAttribute('aria-expanded') === 'true';
          toggle(target, !isTargetOpen);
      });
    }
    displayFilters ();
  </script>
{% endblock %}
